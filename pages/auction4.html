<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXCQ Protected Note Auction - 150% Yield Boost | 50% Protection</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/enhanced-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <style>
        /* Main layout structure */
        .auction-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem 0.75rem;
        }
        
        .auction-header {
            margin-bottom: 1rem;
        }
        
        .auction-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.2rem;
        }
        
        .auction-subtitle {
            font-size: 0.85rem;
            color: var(--text-secondary);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        
        .auction-subtitle span {
            background-color: #f8f9fa;
            padding: 4px 8px;
            border-radius: 6px;
            white-space: nowrap;
        }
        
        .auction-subtitle strong {
            color: var(--text-primary, #333);
        }
        
        /* Three-panel layout */
        .auction-panels {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        /* Top panels container */
        .top-panels-container {
            display: flex;
            gap: 1rem;
            min-height: 650px;
        }
        
        /* Left Panel (60% width) */
        .left-panel {
            flex: 6;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        /* Center Panel (20% width) */
        .center-panel {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        /* Right Panel (20% width) */
        .right-panel {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        /* Bottom Panel (full width) */
        .bottom-panel {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        /* Panel card styling */
        .panel-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 1rem;
        }
        
        .panel-card-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            padding-bottom: 0.4rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* User Portfolio */
        .portfolio-card {
            margin-bottom: 0;
        }
        
        .portfolio-summary {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }
        
        /* Updated portfolio styling for bottom panel */
        .bottom-panel .portfolio-summary {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: space-between;
        }
        
        .bottom-panel .portfolio-summary-item {
            width: calc(25% - 0.75rem);
            padding: 0.75rem;
            background-color: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            transition: all 0.2s ease;
        }
        
        .bottom-panel .portfolio-summary-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .bottom-panel .portfolio-summary-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.4rem;
        }
        
        .bottom-panel .portfolio-summary-value {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary);
        }
        
        .bottom-panel .portfolio-pnl {
            font-weight: 700;
            font-size: 1.3rem;
        }
        
        .portfolio-summary-item {
            width: calc(50% - 0.375rem);
            padding: 0.4rem;
            background-color: #f8f9fa;
            border-radius: 6px;
        }
        
        .portfolio-summary-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-bottom: 0.2rem;
        }
        
        .portfolio-summary-value {
            font-weight: 600;
            font-size: 1rem;
        }
        
        .portfolio-pnl {
            font-weight: 600;
            font-size: 1rem;
        }
        
        .portfolio-pnl.positive {
            color: #28a745;
        }
        
        .portfolio-pnl.negative {
            color: #dc3545;
        }
        
        /* Protection threshold visualization */
        .protection-container {
            margin-top: 1rem;
        }
        
        .protection-bar, .protection-meter {
            height: 12px;
            background-color: #e9ecef;
            border-radius: 4px;
            margin: 2.5rem 0 1.5rem;
            position: relative;
            overflow: visible;
        }
        
        .protection-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            width: 50%;
        }
        
        .protection-threshold {
            position: absolute;
            left: 50%;
            top: -25px;
            transform: translateX(-50%);
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 2px 5px;
            border-radius: 3px;
            z-index: 5; /* Add z-index to ensure labels appear above other elements */
        }
        
        /* Add specific styles for edge labels to prevent overflow */
        .protection-threshold.edge-left {
            left: 5px;
            transform: none;
        }
        
        .protection-threshold.edge-right {
            left: auto;
            right: 5px;
            transform: none;
        }
        
        .protection-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 10px;
            padding: 0 5px; /* Add padding to align with the edge labels */
        }
        
        /* Update the protection-status class to add padding */
        .protection-status {
            padding-top: 10px;
            padding-bottom: 10px;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 0.5rem;
        }
        
        .quick-action-btn {
            padding: 0.6rem 1rem;
            border-radius: 6px;
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s ease;
        }
        
        .quick-action-btn:hover {
            background-color: #e9ecef;
        }
        
        .quick-action-btn .icon {
            margin: 0;
        }
        
        /* Auction Progress Timeline */
        .timeline-container {
            margin: 1.25rem 0;
        }
        
        .timeline {
            display: flex;
            justify-content: space-between;
            position: relative;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            top: 25px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--border-color);
            z-index: 1;
        }
        
        .timeline-step {
            position: relative;
            z-index: 2;
            text-align: center;
            cursor: pointer;
        }
        
        .timeline-point {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin: 0 auto 0.4rem;
        }
        
        .timeline-point.completed {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .timeline-point.active {
            background-color: white;
            color: var(--primary);
            border-color: var(--primary);
            border-width: 3px;
        }
        
        .timeline-label {
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 0.2rem;
        }
        
        .timeline-sublabel {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }
        
        /* Add styles for tokens sold and trigger status */
        .timeline-tokens-sold {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 0.2rem;
        }
        
        .timeline-trigger {
            font-size: 0.7rem;
            margin-top: 0.2rem;
            padding: 1px 4px;
            border-radius: 3px;
            display: inline-block;
        }
        
        .timeline-trigger.triggered {
            background-color: #28a745;
            color: white;
        }
        
        .timeline-trigger.not-triggered {
            background-color: #dc3545;
            color: white;
        }
        
        /* Countdown clock */
        .countdown-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0.75rem 0;
            padding: 0.75rem;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .countdown-timer {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .countdown-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 0.4rem;
        }
        
        /* Transaction History */
        .transaction-list {
            overflow-y: auto;
            max-height: 400px;
        }
        
        .transaction-item {
            padding: 0.6rem 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .transaction-item:last-child {
            border-bottom: none;
        }
        
        .transaction-details {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }
        
        .transaction-price {
            font-weight: 600;
        }
        
        .transaction-meta {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }
        
        .transaction-amount {
            font-weight: 500;
            color: var(--primary);
        }
        
        /* Transaction filter styles */
        .transaction-filter {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .filter-btn {
            padding: 0.4rem 0.75rem;
            border-radius: 4px;
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-btn.active {
            background-color: var(--primary);
            border-color: var(--primary);
            color: #000;
        }
        
        /* Compliance Disclosures */
        .compliance-toggle {
            margin-top: 1rem;
        }
        
        .compliance-title {
            cursor: pointer;
            padding: 0.5rem 0;
            display: flex;
            justify-content: space-between;
            font-weight: 500;
        }
        
        .compliance-content {
            font-size: 0.8rem;
            color: var(--text-secondary);
            padding-top: 0.5rem;
            border-top: 1px solid var(--border-color);
        }
        
        /* Bid form styles */
        .bid-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 0.75rem;
        }
        
        .bid-tab {
            padding: 0.6rem 0.8rem;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.8rem;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }
        
        .bid-tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
        }
        
        .bid-tab:hover:not(.active) {
            background-color: #f8f9fa;
            border-bottom-color: #e9ecef;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Form styling */
        .bid-form {
            margin-top: 1rem;
        }
        
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-primary);
        }
        
        .form-group input[type="number"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.2s ease;
            background-color: #fff;
        }
        
        .form-group input[type="number"]:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(246, 209, 49, 0.2);
            outline: none;
        }
        
        .price-range {
            display: flex;
            gap: 1rem;
        }
        
        .price-range input {
            flex: 1;
        }
        
        .submit-btn {
            width: 100%;
            padding: 0.9rem;
            background-color: var(--primary);
            color: #000;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .submit-btn:hover {
            background-color: #e5c32c;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .submit-btn:active {
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        /* Estimate box styling */
        .estimate-box {
            background-color: #f8f9fa;
            padding: 1.25rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border: 1px solid #e9ecef;
        }
        
        .estimate-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }
        
        .estimate-row:last-of-type {
            margin-bottom: 0;
        }
        
        .estimate-total {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            padding-top: 0.75rem;
            margin-top: 0.5rem;
            border-top: 1px solid var(--border-color);
            font-size: 1.05rem;
        }
        
        /* Early bid discount alert */
        .early-bid-alert {
            background-color: rgba(246, 209, 49, 0.15);
            border-left: 3px solid var(--primary);
            padding: 1rem;
            margin-bottom: 1.25rem;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .early-bid-alert .alert-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .early-bid-alert .alert-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .early-bid-alert .alert-timer {
            font-weight: 600;
        }
        
        .early-bid-alert .alert-savings {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-primary);
        }
        
        /* Account Tabs Styling */
        .account-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .account-tab {
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            font-weight: 500;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }
        
        .account-tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
        }
        
        .account-tab:hover:not(.active) {
            background-color: #f8f9fa;
            border-bottom-color: #e9ecef;
        }
        
        .account-tab-content {
            display: none;
        }
        
        .account-tab-content.active {
            display: block;
        }
        
        /* Account Tables Styling */
        .account-table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .account-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        .account-table th {
            text-align: left;
            padding: 0.75rem;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
            color: var(--text-secondary);
        }
        
        .account-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }
        
        .account-table tbody tr:hover {
            background-color: rgba(246, 209, 49, 0.05);
        }
        
        .account-table tfoot {
            font-weight: 600;
        }
        
        .account-table tfoot td {
            border-top: 2px solid var(--border-color);
            border-bottom: none;
            padding: 0.75rem;
        }
        
        .total-label {
            text-align: right;
            font-weight: 600;
        }
        
        .total-value {
            font-weight: 700;
            color: var(--text-primary);
        }
        
        /* Asset Info Styling */
        .asset-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .asset-icon {
            font-size: 1.2rem;
        }
        
        .asset-name {
            font-weight: 600;
        }
        
        /* Status Indicators */
        .status-pending, .status-active, .status-partial, .status-filled, .status-cancelled {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
        }
        
        .status-pending {
            background-color: rgba(255, 193, 7, 0.2);
            color: #856404;
        }
        
        .status-active {
            background-color: rgba(246, 209, 49, 0.2);
            color: #856404;
        }
        
        .status-partial {
            background-color: rgba(23, 162, 184, 0.2);
            color: #117a8b;
        }
        
        .status-filled {
            background-color: rgba(40, 167, 69, 0.2);
            color: #155724;
        }
        
        .status-cancelled {
            background-color: rgba(108, 117, 125, 0.2);
            color: #6c757d;
        }
        
        /* Cancel Button */
        .cancel-btn {
            padding: 0.25rem 0.5rem;
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .cancel-btn:hover {
            background-color: #e9ecef;
        }
        
        /* Positive/Negative Values */
        .positive {
            color: #28a745;
        }
        
        .negative {
            color: #dc3545;
        }
        
        /* Responsive adjustments */
        @media (max-width: 1200px) {
            .top-panels-container {
                flex-direction: column;
            }
            
            .left-panel, .center-panel, .right-panel {
                width: 100%;
            }
            
            /* Adjust portfolio summary for better mobile display */
            .bottom-panel .portfolio-summary-item {
                width: calc(50% - 0.5rem);
            }
        }
        
        @media (max-width: 768px) {
            .price-info {
                grid-template-columns: 1fr;
            }
            
            .portfolio-summary {
                grid-template-columns: 1fr;
            }
            
            .portfolio-summary-item {
                width: 100%;
            }
            
            /* Improve mobile layout for bottom panel */
            .bottom-panel .panel-card {
                padding: 1rem;
            }
            
            .bottom-panel .portfolio-summary-item {
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .bottom-panel .portfolio-summary-value,
            .bottom-panel .portfolio-pnl {
                font-size: 1.25rem;
            }
        }
        
        /* Icons */
        .icon {
            width: 18px;
            height: 18px;
            display: inline-block;
        }
        
        /* Tab content */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Visual tabs styling */
        .visual-tabs {
            margin-bottom: 0.5rem;
        }
        
        .visual-tab-content {
            display: none;
        }
        
        .visual-tab-content.active {
            display: block;
        }
        
        /* Current Bids Widget Styling */
        .current-bids-container {
            margin-top: 0.75rem;
        }
        
        .current-bids-header {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            font-weight: 600;
            font-size: 0.75rem;
            color: var(--text-secondary);
            padding: 0.4rem 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .bid-price-header {
            flex: 1;
        }
        
        .bid-amount-header {
            flex: 1;
            text-align: center;
        }
        
        .bid-user-header {
            flex: 1;
            text-align: right;
        }
        
        .current-bids-list {
            max-height: 350px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 6px 6px;
        }
        
        .bid-item {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.75rem;
        }
        
        .bid-item:last-child {
            border-bottom: none;
        }
        
        .bid-item:hover {
            background-color: rgba(246, 209, 49, 0.05);
        }
        
        .bid-price {
            flex: 1;
            font-weight: 600;
        }
        
        .bid-amount {
            flex: 1;
            text-align: center;
        }
        
        .bid-user {
            flex: 1;
            text-align: right;
            color: var(--text-secondary);
        }
        
        .bid-above .bid-price {
            color: #28a745;
        }
        
        .bid-below .bid-price {
            color: #dc3545;
        }
        
        .clearing-price-indicator {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            background-color: rgba(246, 209, 49, 0.1);
        }
        
        .clearing-line {
            flex: 1;
            height: 1px;
            background-color: var(--primary);
        }
        
        .clearing-label {
            margin: 0 0.75rem;
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-primary);
            white-space: nowrap;
        }
        
        .clearing-price-info {
            margin-top: 1rem;
            padding: 0.75rem;
            background-color: #f8f9fa;
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        /* Bid form styles */
        .bid-form-group {
            margin-bottom: 0.75rem;
        }
        
        .bid-form-label {
            display: block;
            font-weight: 500;
            font-size: 0.8rem;
            margin-bottom: 0.3rem;
        }
        
        .bid-form-input {
            width: 100%;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            font-size: 0.85rem;
        }
        
        .bid-form-addon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .bid-form-help {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 0.3rem;
        }
        
        .bid-form-submit {
            width: 100%;
            padding: 0.6rem;
            border-radius: 6px;
            background-color: var(--primary);
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 0.5rem;
        }
        
        /* Visual tab content */
        .visual-tab-content {
            display: none;
        }
        
        .visual-tab-content.active {
            display: block;
        }
        
        /* Chart container */
        .chart-container {
            position: relative;
            height: 550px;
            margin-top: 0.75rem;
            margin-bottom: 0.75rem;
        }
        
        .chart-description {
            margin-top: 10px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <!-- Header Component -->
    <site-header></site-header>

    <main class="auction-container">
        <div class="auction-header">
            <h1 class="auction-title">EXCQ Protected Note Auction - 150% Yield Boost | 50% Protection</h1>

            <p class="auction-subtitle">
                <span><strong>Maturity:</strong> Dec 15, 2023</span>
                <span><strong>Auction:</strong> Round 3 of 6</span>
                <span><strong>Reserve Bank:</strong> 25,000</span>
                <span><strong>Prior Round Tokens:</strong> 18,500</span>
                <span><strong>Total Round Volume:</strong> 112,000</span>
                <span><strong>Time Remaining:</strong> <span id="subtitle-countdown">05:23:47</span></span>
            </p>
        
        <!-- Three-panel layout structure -->
        <div class="auction-panels">
            <!-- Top panels container -->
            <div class="top-panels-container">
                <!-- Left Panel (50% width) -->
                <section class="left-panel">
                    <!-- Auction Progress Timeline -->
                    <div class="panel-card">
                        <div class="panel-card-title">
                            <span>Auction Progress Timeline</span>
                        </div>
                        <div class="timeline-container">
                            <div class="timeline">
                                <div class="timeline-step" data-round="1">
                                    <div class="timeline-point completed">1</div>
                                    <div class="timeline-label">Round 1</div>
                                    <div class="timeline-sublabel">$1.33</div>
                                    <div class="timeline-tokens-sold">100,000</div>
                                    <div class="timeline-trigger triggered">Triggered</div>
                                </div>
                                <div class="timeline-step" data-round="2">
                                    <div class="timeline-point completed">2</div>
                                    <div class="timeline-label">Round 2</div>
                                    <div class="timeline-sublabel">$1.85</div>
                                    <div class="timeline-tokens-sold">90,000</div>
                                    <div class="timeline-trigger not-triggered">Not Triggered</div>
                                </div>
                                <div class="timeline-step" data-round="3">
                                    <div class="timeline-point active">3</div>
                                    <div class="timeline-label">Round 3</div>
                                    <div class="timeline-sublabel">Active</div>
                                    <div class="timeline-tokens-sold">45,000 so far</div>
                                    <div class="timeline-trigger not-triggered">Not Triggered</div>
                                </div>
                                <div class="timeline-step" data-round="4">
                                    <div class="timeline-point">4</div>
                                    <div class="timeline-label">Round 4</div>
                                    <div class="timeline-sublabel">Upcoming</div>
                                    <div class="timeline-tokens-sold">0</div>
                                    <div class="timeline-trigger">Pending</div>
                                </div>
                                <div class="timeline-step" data-round="5">
                                    <div class="timeline-point">5</div>
                                    <div class="timeline-label">Round 5</div>
                                    <div class="timeline-sublabel">Upcoming</div>
                                    <div class="timeline-tokens-sold">0</div>
                                    <div class="timeline-trigger">Pending</div>
                                </div>
                                <div class="timeline-step" data-round="6">
                                    <div class="timeline-point">6</div>
                                    <div class="timeline-label">Round 6</div>
                                    <div class="timeline-sublabel">Upcoming</div>
                                    <div class="timeline-tokens-sold">0</div>
                                    <div class="timeline-trigger">Pending</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Active Round Details with Tabs -->
                    <div class="panel-card">
                        <div class="panel-card-title">
                            <span>Round 3 Details</span>
                            <span>112,000 available</span>
                        </div>
                        
                        <!-- Tab Navigation for Visuals -->
                        <div class="bid-tabs visual-tabs">
                            <div class="bid-tab active" data-visual-tab="price-curve">Price Curve</div>
                            <div class="bid-tab" data-visual-tab="bid-distribution">Bid Distribution</div>
                            <div class="bid-tab" data-visual-tab="cumulative-demand">Cumulative Demand</div>
                        </div>
                        
                        <!-- Price Curve Tab Content -->
                        <div class="visual-tab-content active" id="price-curve-content">
                            <div style="height: 550px; margin-bottom: 0.75rem; margin-top: 0.75rem;">
                                <canvas id="priceCurveChart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Bid Distribution Tab Content -->
                        <div class="visual-tab-content" id="bid-distribution-content">
                            <div style="height: 550px; margin-bottom: 0.75rem; margin-top: 0.75rem;">
                                <canvas id="bidHeatmapChart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Cumulative Demand Tab Content -->
                        <div class="visual-tab-content" id="cumulative-demand-content">
                            <div class="chart-container" style="position: relative; height: 550px; margin-top: 0.75rem; margin-bottom: 0.75rem;">
                                <canvas id="roundChart"></canvas>
                            </div>
                            <div class="chart-description" style="margin-top: 10px; font-size: 0.75rem; color: var(--text-secondary);">
                                This graph shows the cumulative demand curve for the current auction round. 
                                The colored areas represent different allocation tiers, and the curve indicates 
                                price sensitivity at various demand levels.
                            </div>
                        </div>
                        
                        <!-- Countdown clock -->
                        <div style="text-align: center; margin-top: 1rem;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--primary);" id="round-countdown"></div>
                        </div>
                    </div>
                </section>

                <!-- Center Panel (30% width) -->
                <section class="center-panel">
                    <!-- Current Bids Widget -->
                    <div class="panel-card">
                        <div class="panel-card-title">
                            <span>Current Bids</span>
                            <span>Clearing Price: $1.52</span>
                        </div>
                        
                        <!-- Tab Navigation for Current Bids -->
                        <div class="bid-tabs visual-tabs">
                            <div class="bid-tab active" data-visual-tab="all-bids">All Bids</div>
                            <div class="bid-tab" data-visual-tab="above-clearing">Above Clearing</div>
                            <div class="bid-tab" data-visual-tab="below-clearing">Below Clearing</div>
                        </div>
                        
                        <!-- All Bids Tab Content -->
                        <div class="visual-tab-content active" id="all-bids-content">
                            <div class="current-bids-container">
                                <div class="current-bids-header">
                                    <div class="bid-price-header">Bid Price</div>
                                    <div class="bid-amount-header">Amount</div>
                                    <div class="bid-user-header">Total Value</div>
                                </div>
                                <div class="current-bids-list">
                                    <!-- Bids above clearing price -->
                                    <div class="bid-item bid-above">
                                        <div class="bid-price">$1.65</div>
                                        <div class="bid-amount">2,000</div>
                                        <div class="bid-user">$3,300.00</div>
                                    </div>
                                    <div class="bid-item bid-above">
                                        <div class="bid-price">$1.58</div>
                                        <div class="bid-amount">1,200</div>
                                        <div class="bid-user">$1,896.00</div>
                                    </div>
                                    <div class="bid-item bid-above">
                                        <div class="bid-price">$1.55</div>
                                        <div class="bid-amount">1,000</div>
                                        <div class="bid-user">$1,550.00</div>
                                    </div>
                                    
                                    <!-- Clearing price indicator -->
                                    <div class="clearing-price-indicator">
                                        <div class="clearing-line"></div>
                                        <div class="clearing-label">Clearing Price: $1.52</div>
                                        <div class="clearing-line"></div>
                                    </div>
                                    
                                    <!-- Bids below clearing price -->
                                    <div class="bid-item bid-below">
                                        <div class="bid-price">$1.49</div>
                                        <div class="bid-amount">850</div>
                                        <div class="bid-user">$1,266.50</div>
                                    </div>
                                    <div class="bid-item bid-below">
                                        <div class="bid-price">$1.47</div>
                                        <div class="bid-amount">750</div>
                                        <div class="bid-user">$1,102.50</div>
                                    </div>
                                    <div class="bid-item bid-below">
                                        <div class="bid-price">$1.44</div>
                                        <div class="bid-amount">3,200</div>
                                        <div class="bid-user">$4,608.00</div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearing-price-info">
                                <p>All successful bidders pay the clearing price of $1.52 per token, regardless of their bid price.</p>
                            </div>
                        </div>
                        
                        <!-- Above Clearing Tab Content -->
                        <div class="visual-tab-content" id="above-clearing-content">
                            <div class="current-bids-container">
                                <div class="current-bids-header">
                                    <div class="bid-price-header">Bid Price</div>
                                    <div class="bid-amount-header">Amount</div>
                                    <div class="bid-user-header">Total Value</div>
                                </div>
                                <div class="current-bids-list">
                                    <div class="bid-item bid-above">
                                        <div class="bid-price">$1.65</div>
                                        <div class="bid-amount">2,000</div>
                                        <div class="bid-user">$3,300.00</div>
                                    </div>
                                    <div class="bid-item bid-above">
                                        <div class="bid-price">$1.58</div>
                                        <div class="bid-amount">1,200</div>
                                        <div class="bid-user">$1,896.00</div>
                                    </div>
                                    <div class="bid-item bid-above">
                                        <div class="bid-price">$1.55</div>
                                        <div class="bid-amount">1,000</div>
                                        <div class="bid-user">$1,550.00</div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearing-price-info">
                                <p>These bids are above the clearing price ($1.52) and will be filled. All bidders pay the clearing price.</p>
                            </div>
                        </div>
                        
                        <!-- Below Clearing Tab Content -->
                        <div class="visual-tab-content" id="below-clearing-content">
                            <div class="current-bids-container">
                                <div class="current-bids-header">
                                    <div class="bid-price-header">Bid Price</div>
                                    <div class="bid-amount-header">Amount</div>
                                    <div class="bid-user-header">Total Value</div>
                                </div>
                                <div class="current-bids-list">
                                    <div class="bid-item bid-below">
                                        <div class="bid-price">$1.49</div>
                                        <div class="bid-amount">850</div>
                                        <div class="bid-user">$1,266.50</div>
                                    </div>
                                    <div class="bid-item bid-below">
                                        <div class="bid-price">$1.47</div>
                                        <div class="bid-amount">750</div>
                                        <div class="bid-user">$1,102.50</div>
                                    </div>
                                    <div class="bid-item bid-below">
                                        <div class="bid-price">$1.44</div>
                                        <div class="bid-amount">3,200</div>
                                        <div class="bid-user">$4,608.00</div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearing-price-info">
                                <p>These bids are below the clearing price ($1.52) and will not be filled in this round.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Right Panel (20% width) -->
                <section class="right-panel">
                    <!-- Participation Options (moved from center panel) -->
                    <div class="panel-card">
                        <div class="panel-card-title">
                            <span>Participation Options</span>
                        </div>
                        
                        <!-- Tab Navigation -->
                        <div class="bid-tabs">
                            <div class="bid-tab active" data-tab="simple-bid">Simple Bid</div>
                            <div class="bid-tab" data-tab="advanced-bid">Advanced Bid</div>
                            <div class="bid-tab" data-tab="sell-tokens">Sell Tokens</div>
                        </div>
                        
                        <!-- Simple Bid Content -->
                        <div class="tab-content active" id="simple-bid-content">
                            <!-- Early Bid Discount Alert -->
                            <div class="early-bid-alert">
                                <div>
                                    <div class="alert-title">Early Bid Discount: 5%</div>
                                    <div class="alert-description">Place your bid within <span id="simple-discount-timer" class="alert-timer">03:45:12</span> to receive the discount</div>
                                </div>
                                <div class="alert-savings">Save up to $125</div>
                            </div>
                            
                            <div class="bid-form">
                                <div class="form-group">
                                    <label>Bid Amount ($)</label>
                                    <input type="number" id="simple-bid-amount" placeholder="Enter amount">
                                </div>
                                <div class="form-group">
                                    <label>Maximum Price per Token ($)</label>
                                    <input type="number" id="simple-max-price" value="1.60">
                                </div>
                                
                                <!-- Estimated Tokens Box -->
                                <div class="estimate-box">
                                    <div class="estimate-row">
                                        <span>Estimated Tokens</span>
                                        <span id="simple-estimated-tokens">0</span>
                                    </div>
                                    <div class="estimate-row">
                                        <span>Early Bid Discount</span>
                                        <span id="simple-discount">$0.00</span>
                                    </div>
                                    <div class="estimate-total">
                                        <span>Total Bid</span>
                                        <span id="simple-total">$0.00</span>
                                    </div>
                                </div>
                                
                                <button class="submit-btn" id="simple-bid-submit">Place Bid</button>
                            </div>
                        </div>
                        
                        <!-- Advanced Bid Content -->
                        <div class="tab-content" id="advanced-bid-content">
                            <!-- Early Bid Discount Alert -->
                            <div class="early-bid-alert">
                                <div>
                                    <div class="alert-title">Early Bid Discount: 5%</div>
                                    <div class="alert-description">Place your bid within <span id="advanced-discount-timer" class="alert-timer">03:45:12</span> to receive the discount</div>
                                </div>
                                <div class="alert-savings">Save up to $125</div>
                            </div>
                            
                            <div class="bid-form">
                                <div class="form-group">
                                    <label>Token Amount</label>
                                    <input type="number" id="advanced-token-amount" placeholder="Enter token amount">
                                </div>
                                <div class="form-group">
                                    <label>Price Range ($)</label>
                                    <div class="price-range">
                                        <input type="number" id="min-price" placeholder="Min">
                                        <input type="number" id="max-price" placeholder="Max">
                                    </div>
                                </div>
                                
                                <!-- Estimated Tokens Box -->
                                <div class="estimate-box">
                                    <div class="estimate-row">
                                        <span>Total Bid Amount</span>
                                        <span id="adv-total-amount">$0.00</span>
                                    </div>
                                    <div class="estimate-row">
                                        <span>Early Bid Discount</span>
                                        <span id="adv-discount">$0.00</span>
                                    </div>
                                    <div class="estimate-row">
                                        <span>Success Probability</span>
                                        <span id="adv-probability">N/A</span>
                                    </div>
                                    <div class="estimate-total">
                                        <span>Final Amount</span>
                                        <span id="adv-final-amount">$0.00</span>
                                    </div>
                                </div>
                                
                                <button class="submit-btn" id="advanced-bid-submit">Place Advanced Bid</button>
                            </div>
                        </div>
                        
                        <!-- Sell Tokens Content -->
                        <div class="tab-content" id="sell-tokens-content">
                            <div class="bid-form">
                                <div class="form-group">
                                    <label>Token Amount to Sell</label>
                                    <input type="number" id="sell-token-amount" placeholder="Enter amount to sell">
                                </div>
                                <div class="form-group">
                                    <label>Minimum Price per Token ($)</label>
                                    <input type="number" id="sell-min-price" value="1.40">
                                </div>
                                
                                <!-- Preview Box for Sell Tokens -->
                                <div class="estimate-box">
                                    <div class="estimate-row">
                                        <span>Tokens to Sell</span>
                                        <span id="sell-tokens-preview">0</span>
                                    </div>
                                    <div class="estimate-row">
                                        <span>Minimum Sale Price</span>
                                        <span id="sell-price-preview">$1.40</span>
                                    </div>
                                    <div class="estimate-row">
                                        <span>Your Average Cost</span>
                                        <span id="sell-avg-cost">$1.41</span>
                                    </div>
                                    <div class="estimate-row">
                                        <span>Profit/Loss per Token</span>
                                        <span id="sell-pnl-per-token">$0.00</span>
                                    </div>
                                    <div class="estimate-total">
                                        <span>Total Sale Amount</span>
                                        <span id="sell-total-amount">$0.00</span>
                                    </div>
                                    <div class="estimate-total" style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: none;">
                                        <span>Total P&L</span>
                                        <span id="sell-total-pnl">$0.00</span>
                                    </div>
                                </div>
                                
                                <button class="submit-btn" id="sell-tokens-submit">Sell Tokens</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Compliance Disclosures -->
                    <div class="panel-card">
                        <div class="compliance-toggle">
                            <div class="compliance-title">
                                <span>Auction Rules</span>
                                <span>+</span>
                            </div>
                            <div class="compliance-content" style="display: none;">
                                <p>This is a multi-round uniform price auction where participants can both buy and sell tokens between rounds. Each round establishes a single clearing price for all successful bids. The auction includes 6 rounds with protection mechanisms to maintain price stability.</p>
                                <p>Key features:</p>
                                <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                    <li>Uniform pricing - all successful bids in a round receive the same price</li>
                                    <li>Inter-round trading - ability to sell tokens between rounds</li>
                                    <li>50% price protection - downside protection mechanism</li>
                                    <li>Early bid discounts - 5% discount for early participation</li>
                                </ul>
                                <p style="margin-top: 0.75rem;"><a href="/documents/auction-rules.pdf" style="color: var(--primary); text-decoration: underline; font-weight: 500;">View Full Auction Rules Document</a></p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- Bottom Panel (full width) -->
            <section class="bottom-panel">
                <div class="panel-card">
                    <div class="panel-card-title">
                        <span>Your Account</span>
                    </div>
                    
                    <!-- Tab Navigation -->
                    <div class="account-tabs">
                        <div class="account-tab active" data-tab="balances">Balances</div>
                        <div class="account-tab" data-tab="positions">Positions</div>
                        <div class="account-tab" data-tab="open-orders">Open Orders</div>
                        <div class="account-tab" data-tab="bid-history">Bid History</div>
                        <div class="account-tab" data-tab="order-history">Order History</div>
                    </div>
                    
                    <!-- Balances Tab Content -->
                    <div class="account-tab-content active" id="balances-content">
                        <div class="account-table-container">
                            <table class="account-table">
                                <thead>
                                    <tr>
                                        <th>Asset</th>
                                        <th>Available Balance</th>
                                        <th>Locked in Orders</th>
                                        <th>Total Balance</th>
                                        <th>USD Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="asset-info">
                                                <span class="asset-icon"></span>
                                                <span class="asset-name">USD</span>
                                            </div>
                                        </td>
                                        <td>$8,450.00</td>
                                        <td>$2,500.00</td>
                                        <td>$10,950.00</td>
                                        <td>$10,950.00</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="asset-info">
                                                <span class="asset-icon"></span>
                                                <span class="asset-name">EXCQ</span>
                                            </div>
                                        </td>
                                        <td>3,000</td>
                                        <td>0</td>
                                        <td>3,000</td>
                                        <td>$5,250.00</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="asset-info">
                                                <span class="asset-icon"></span>
                                                <span class="asset-name">EXCQ-NOTE</span>
                                            </div>
                                        </td>
                                        <td>1,500</td>
                                        <td>500</td>
                                        <td>2,000</td>
                                        <td>$3,500.00</td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4" class="total-label">Total Portfolio Value</td>
                                        <td class="total-value">$19,700.00</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Positions Tab Content -->
                    <div class="account-tab-content" id="positions-content">
                        <div class="account-table-container">
                            <table class="account-table">
                                <thead>
                                    <tr>
                                        <th>Asset</th>
                                        <th>Amount</th>
                                        <th>Avg. Entry Price</th>
                                        <th>Current Price</th>
                                        <th>Value</th>
                                        <th>P&L</th>
                                        <th>P&L %</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="asset-info">
                                                <span class="asset-icon"></span>
                                                <span class="asset-name">EXCQ</span>
                                            </div>
                                        </td>
                                        <td>3,000</td>
                                        <td>$1.41</td>
                                        <td>$1.75</td>
                                        <td>$5,250.00</td>
                                        <td class="positive">+$1,020.00</td>
                                        <td class="positive">+24.1%</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="asset-info">
                                                <span class="asset-icon"></span>
                                                <span class="asset-name">EXCQ-NOTE</span>
                                            </div>
                                        </td>
                                        <td>2,000</td>
                                        <td>$1.33</td>
                                        <td>$1.75</td>
                                        <td>$3,500.00</td>
                                        <td class="positive">+$840.00</td>
                                        <td class="positive">+31.6%</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="asset-info">
                                                <span class="asset-icon"></span>
                                                <span class="asset-name">EXCQ-LOCKED</span>
                                            </div>
                                        </td>
                                        <td>1,000</td>
                                        <td>$1.20</td>
                                        <td>$1.65</td>
                                        <td>$1,650.00</td>
                                        <td class="positive">+$450.00</td>
                                        <td class="positive">+37.5%</td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4" class="total-label">Total Position Value</td>
                                        <td class="total-value">$10,400.00</td>
                                        <td class="total-value positive">+$2,310.00</td>
                                        <td class="total-value positive">+28.6%</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Open Orders Tab Content -->
                    <div class="account-tab-content" id="open-orders-content">
                        <div class="account-table-container">
                            <table class="account-table">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Type</th>
                                        <th>Asset</th>
                                        <th>Amount</th>
                                        <th>Price</th>
                                        <th>Total</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#ORD-3845</td>
                                        <td>Buy</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>1,500</td>
                                        <td>$1.60</td>
                                        <td>$2,400.00</td>
                                        <td><span class="status-pending">Pending</span></td>
                                        <td><button class="cancel-btn">Cancel</button></td>
                                    </tr>
                                    <tr>
                                        <td>#ORD-3842</td>
                                        <td>Buy</td>
                                        <td>EXCQ</td>
                                        <td>500</td>
                                        <td>$1.70</td>
                                        <td>$850.00</td>
                                        <td><span class="status-partial">Partial (250)</span></td>
                                        <td><button class="cancel-btn">Cancel</button></td>
                                    </tr>
                                    <tr>
                                        <td>#ORD-3840</td>
                                        <td>Sell</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>500</td>
                                        <td>$1.85</td>
                                        <td>$925.00</td>
                                        <td><span class="status-pending">Pending</span></td>
                                        <td><button class="cancel-btn">Cancel</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Bid History Tab Content -->
                    <div class="account-tab-content" id="bid-history-content">
                        <div class="account-table-container">
                            <table class="account-table">
                                <thead>
                                    <tr>
                                        <th>Bid ID</th>
                                        <th>Round</th>
                                        <th>Asset</th>
                                        <th>Amount</th>
                                        <th>Max Price</th>
                                        <th>Total</th>
                                        <th>Status</th>
                                        <th>Time</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#BID-7291</td>
                                        <td>Round 3</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>1,000</td>
                                        <td>$1.75</td>
                                        <td>$1,750.00</td>
                                        <td><span class="status-active">Active</span></td>
                                        <td>18 min ago</td>
                                    </tr>
                                    <tr>
                                        <td>#BID-7245</td>
                                        <td>Round 3</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>500</td>
                                        <td>$1.65</td>
                                        <td>$825.00</td>
                                        <td><span class="status-active">Active</span></td>
                                        <td>1 hour ago</td>
                                    </tr>
                                    <tr>
                                        <td>#BID-7102</td>
                                        <td>Round 2</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>1,500</td>
                                        <td>$1.80</td>
                                        <td>$2,700.00</td>
                                        <td><span class="status-filled">Filled</span></td>
                                        <td>1 day ago</td>
                                    </tr>
                                    <tr>
                                        <td>#BID-6954</td>
                                        <td>Round 2</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>750</td>
                                        <td>$1.75</td>
                                        <td>$1,312.50</td>
                                        <td><span class="status-filled">Filled</span></td>
                                        <td>1 day ago</td>
                                    </tr>
                                    <tr>
                                        <td>#BID-6823</td>
                                        <td>Round 1</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>2,000</td>
                                        <td>$1.40</td>
                                        <td>$2,800.00</td>
                                        <td><span class="status-filled">Filled</span></td>
                                        <td>3 days ago</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Order History Tab Content -->
                    <div class="account-tab-content" id="order-history-content">
                        <div class="account-table-container">
                            <table class="account-table">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Type</th>
                                        <th>Asset</th>
                                        <th>Amount</th>
                                        <th>Price</th>
                                        <th>Total</th>
                                        <th>Status</th>
                                        <th>Time</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#ORD-3839</td>
                                        <td>Buy</td>
                                        <td>EXCQ</td>
                                        <td>1,000</td>
                                        <td>$1.51</td>
                                        <td>$1,510.00</td>
                                        <td><span class="status-filled">Filled</span></td>
                                        <td>18 min ago</td>
                                    </tr>
                                    <tr>
                                        <td>#ORD-3825</td>
                                        <td>Sell</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>500</td>
                                        <td>$1.62</td>
                                        <td>$810.00</td>
                                        <td><span class="status-filled">Filled</span></td>
                                        <td>2 hours ago</td>
                                    </tr>
                                    <tr>
                                        <td>#ORD-3810</td>
                                        <td>Buy</td>
                                        <td>EXCQ</td>
                                        <td>750</td>
                                        <td>$1.48</td>
                                        <td>$1,110.00</td>
                                        <td><span class="status-filled">Filled</span></td>
                                        <td>1 day ago</td>
                                    </tr>
                                    <tr>
                                        <td>#ORD-3795</td>
                                        <td>Buy</td>
                                        <td>EXCQ-NOTE</td>
                                        <td>1,500</td>
                                        <td>$1.45</td>
                                        <td>$2,175.00</td>
                                        <td><span class="status-filled">Filled</span></td>
                                        <td>2 days ago</td>
                                    </tr>
                                    <tr>
                                        <td>#ORD-3782</td>
                                        <td>Sell</td>
                                        <td>EXCQ</td>
                                        <td>300</td>
                                        <td>$1.55</td>
                                        <td>$465.00</td>
                                        <td><span class="status-filled">Filled</span></td>
                                        <td>2 days ago</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer Component -->
    <site-footer></site-footer>

    <!-- Scripts -->
    <script src="/components/Header.js"></script>
    <script src="/components/Footer.js"></script>
    <script src="/countdown.js"></script>
    <script>
        // Register Chart.js plugins
        console.log('Registering Chart.js plugins');
        
        // Make sure Chart.js is loaded
        window.addEventListener('load', function() {
            if (typeof Chart === 'undefined') {
                console.error('Chart.js is not loaded!');
            } else {
                console.log('Chart.js is loaded successfully');
            }
        });
        
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize transaction history
            const transactions = {
                all: [
                    { price: 1.53, user: 'User0x81...4e', time: '2 min ago', amount: 1200 },
                    { price: 1.49, user: 'User0x72...3a', time: '5 min ago', amount: 850 },
                    { price: 1.62, user: 'User0x44...8b', time: '8 min ago', amount: 2000 },
                    { price: 1.47, user: 'User0x93...5f', time: '12 min ago', amount: 750 },
                    { price: 1.51, user: 'You', time: '18 min ago', amount: 1000 },
                    { price: 1.44, user: 'User0x67...2c', time: '22 min ago', amount: 3200 }
                ],
                'my-bids': [
                    { price: 1.51, user: 'You', time: '18 min ago', amount: 1000 },
                    { price: 1.48, user: 'You', time: '1 hour ago', amount: 500 },
                    { price: 1.45, user: 'You', time: '2 hours ago', amount: 750 }
                ],
                recent: [
                    { price: 1.53, user: 'User0x81...4e', time: '2 min ago', amount: 1200 },
                    { price: 1.49, user: 'User0x72...3a', time: '5 min ago', amount: 850 },
                    { price: 1.62, user: 'User0x44...8b', time: '8 min ago', amount: 2000 }
                ],
                won: [
                    { price: 1.45, user: 'You', time: '2 hours ago', amount: 750 },
                    { price: 1.42, user: 'User0x55...9c', time: '3 hours ago', amount: 1500 }
                ]
            };

            // Current bids data
            const currentBids = [
                { price: 1.65, user: 'User0x44...8b', amount: 2000 },
                { price: 1.58, user: 'User0x81...4e', amount: 1200 },
                { price: 1.55, user: 'You', amount: 1000 },
                { price: 1.49, user: 'User0x72...3a', amount: 850 },
                { price: 1.47, user: 'User0x93...5f', amount: 750 },
                { price: 1.44, user: 'User0x67...2c', amount: 3200 }
            ];
            
            const clearingPrice = 1.52;
            
            // Function to update current bids widget
            function updateCurrentBidsWidget(filter) {
                let filteredBids;
                
                if (filter === 'all-bids') {
                    filteredBids = currentBids;
                } else if (filter === 'above-clearing') {
                    filteredBids = currentBids.filter(bid => bid.price >= clearingPrice);
                } else if (filter === 'below-clearing') {
                    filteredBids = currentBids.filter(bid => bid.price < clearingPrice);
                }
                
                // Sort bids by price (descending)
                filteredBids.sort((a, b) => b.price - a.price);
                
                const bidsList = document.querySelector(`#${filter}-content .current-bids-list`);
                if (!bidsList) return;
                
                bidsList.innerHTML = '';
                
                if (filter === 'all-bids') {
                    // For all bids, we need to add the clearing price indicator
                    const aboveBids = filteredBids.filter(bid => bid.price >= clearingPrice);
                    const belowBids = filteredBids.filter(bid => bid.price < clearingPrice);
                    
                    // Add bids above clearing price
                    aboveBids.forEach(bid => {
                        const bidElement = document.createElement('div');
                        bidElement.className = 'bid-item bid-above';
                        bidElement.innerHTML = `
                            <div class="bid-price">$${bid.price.toFixed(2)}</div>
                            <div class="bid-amount">${bid.amount}</div>
                            <div class="bid-user">$${(bid.price * bid.amount).toFixed(2)}</div>
                        `;
                        bidsList.appendChild(bidElement);
                    });
                    
                    // Add clearing price indicator
                    const clearingIndicator = document.createElement('div');
                    clearingIndicator.className = 'clearing-price-indicator';
                    clearingIndicator.innerHTML = `
                        <div class="clearing-line"></div>
                        <div class="clearing-label">Clearing Price: $${clearingPrice.toFixed(2)}</div>
                        <div class="clearing-line"></div>
                    `;
                    bidsList.appendChild(clearingIndicator);
                    
                    // Add bids below clearing price
                    belowBids.forEach(bid => {
                        const bidElement = document.createElement('div');
                        bidElement.className = 'bid-item bid-below';
                        bidElement.innerHTML = `
                            <div class="bid-price">$${bid.price.toFixed(2)}</div>
                            <div class="bid-amount">${bid.amount}</div>
                            <div class="bid-user">$${(bid.price * bid.amount).toFixed(2)}</div>
                        `;
                        bidsList.appendChild(bidElement);
                    });
                } else {
                    // For filtered views, just add the bids
                    filteredBids.forEach(bid => {
                        const bidElement = document.createElement('div');
                        bidElement.className = `bid-item ${bid.price >= clearingPrice ? 'bid-above' : 'bid-below'}`;
                        bidElement.innerHTML = `
                            <div class="bid-price">$${bid.price.toFixed(2)}</div>
                            <div class="bid-amount">${bid.amount}</div>
                            <div class="bid-user">$${(bid.price * bid.amount).toFixed(2)}</div>
                        `;
                        bidsList.appendChild(bidElement);
                    });
                }
            }
            
            // Initialize current bids widget
            updateCurrentBidsWidget('all-bids');
            updateCurrentBidsWidget('above-clearing');
            updateCurrentBidsWidget('below-clearing');
            
            // Update clearing price in the widget title
            const clearingPriceElements = document.querySelectorAll('.panel-card-title span:last-child');
            clearingPriceElements.forEach(element => {
                if (element.textContent.includes('Clearing Price')) {
                    element.textContent = `Clearing Price: $${clearingPrice.toFixed(2)}`;
                }
            });

            function updateTransactionList(filter) {
                const transactionList = document.getElementById('transaction-list');
                if (!transactionList) return;
                
                transactionList.innerHTML = '';
                
                transactions[filter].forEach(tx => {
                    const txElement = document.createElement('div');
                    txElement.className = 'transaction-item';
                    txElement.innerHTML = `
                        <div class="transaction-details">
                            <div class="transaction-price">$${tx.price.toFixed(2)}</div>
                            <div class="transaction-meta">${tx.user} - ${tx.time}</div>
                        </div>
                        <div class="transaction-amount">${tx.amount}</div>
                    `;
                    transactionList.appendChild(txElement);
                });
            }

            // Transaction filter buttons
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            if (filterButtons.length > 0) {
                filterButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        filterButtons.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        updateTransactionList(btn.dataset.filter);
                    });
                });

                // Initialize with 'all' transactions
                updateTransactionList('all');
            }

            // Bid tabs functionality
            const bidTabs = document.querySelectorAll('.bid-tab');
            const tabContents = document.querySelectorAll('.tab-content');

            if (bidTabs.length > 0) {
                bidTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Skip if this is a visual tab (handled separately)
                        if (tab.hasAttribute('data-visual-tab')) return;
                        
                        bidTabs.forEach(t => {
                            // Skip visual tabs when removing active class
                            if (!t.hasAttribute('data-visual-tab')) {
                                t.classList.remove('active');
                            }
                        });
                        tab.classList.add('active');
                        
                        const tabId = tab.getAttribute('data-tab');
                        tabContents.forEach(content => {
                            content.classList.remove('active');
                            if (content.id === `${tabId}-content`) {
                                content.classList.add('active');
                            }
                        });
                    });
                });
            }

            // Visual tabs functionality
            const visualTabs = document.querySelectorAll('.bid-tab[data-visual-tab]');
            const visualContents = document.querySelectorAll('.visual-tab-content');
            
            if (visualTabs.length > 0) {
                visualTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Find the parent tab container
                        const tabContainer = tab.closest('.bid-tabs');
                        
                        // Only remove active class from tabs in the same container
                        tabContainer.querySelectorAll('.bid-tab').forEach(t => {
                            t.classList.remove('active');
                        });
                        
                        tab.classList.add('active');
                        
                        const tabId = tab.getAttribute('data-visual-tab');
                        
                        // Find the closest parent that contains the tab contents
                        const parentCard = tab.closest('.panel-card');
                        const tabContents = parentCard.querySelectorAll('.visual-tab-content');
                        
                        tabContents.forEach(content => {
                            content.classList.remove('active');
                            if (content.id === `${tabId}-content`) {
                                content.classList.add('active');
                            }
                        });
                        
                        // If this is a current bids tab, update the widget
                        if (['all-bids', 'above-clearing', 'below-clearing'].includes(tabId)) {
                            updateCurrentBidsWidget(tabId);
                        }
                    });
                });
            }

            // Timeline round selection
            const timelineSteps = document.querySelectorAll('.timeline-step');
            timelineSteps.forEach(step => {
                step.addEventListener('click', () => {
                    const round = parseInt(step.getAttribute('data-round'));
                    // Update round details graph here
                    console.log(`Showing details for round ${round}`);
                });
            });

            // Add countdown timer functionality for Round 3
            function updateRoundCountdown() {
                const countdownElement = document.getElementById('round-countdown');
                if (!countdownElement) return;
                
                const countdownText = countdownElement.textContent;
                const [hours, minutes, seconds] = countdownText.split(':').map(Number);
                
                let totalSeconds = hours * 3600 + minutes * 60 + seconds;
                
                if (totalSeconds <= 0) {
                    countdownElement.textContent = "Round Complete";
                    
                    // Update the timeline to show round 3 as completed
                    const round3Step = document.querySelector('.timeline-step[data-round="3"]');
                    if (round3Step) {
                        const round3Point = round3Step.querySelector('.timeline-point');
                        round3Point.classList.remove('active');
                        round3Point.classList.add('completed');
                        
                        const round3Sublabel = round3Step.querySelector('.timeline-sublabel');
                        round3Sublabel.textContent = "$1.65"; // Final price for round 3
                        
                        // Activate round 4
                        const round4Step = document.querySelector('.timeline-step[data-round="4"]');
                        if (round4Step) {
                            const round4Point = round4Step.querySelector('.timeline-point');
                            round4Point.classList.add('active');
                            
                            const round4Sublabel = round4Step.querySelector('.timeline-sublabel');
                            round4Sublabel.textContent = "Active";
                        }
                    }
                    
                    return;
                }
                
                totalSeconds--;
                
                const newHours = Math.floor(totalSeconds / 3600);
                const newMinutes = Math.floor((totalSeconds % 3600) / 60);
                const newSeconds = totalSeconds % 60;
                
                const formattedTime = `${newHours.toString().padStart(2, '0')}:${newMinutes.toString().padStart(2, '0')}:${newSeconds.toString().padStart(2, '0')}`;
                
                countdownElement.textContent = formattedTime;
                
                // Also update the subtitle countdown
                const subtitleCountdown = document.getElementById('subtitle-countdown');
                if (subtitleCountdown) {
                    subtitleCountdown.textContent = formattedTime;
                }
                
                setTimeout(updateRoundCountdown, 1000);
            }

            // Start countdown timer when page loads
            document.addEventListener('DOMContentLoaded', function() {
                updateRoundCountdown();
                
                // Add auction data with trigger mechanism and tokens sold information
                const auctionRoundData = [
                    { 
                        round: 1, 
                        price: 1.33, 
                        status: 'completed', 
                        tokensSold: 100000, 
                        triggerActivated: true 
                    },
                    { 
                        round: 2, 
                        price: 1.85, 
                        status: 'completed', 
                        tokensSold: 90000, 
                        triggerActivated: false 
                    },
                    { 
                        round: 3, 
                        price: 0, // Will be determined at end of round
                        status: 'active', 
                        tokensSold: 45000, 
                        triggerActivated: false 
                    },
                    { 
                        round: 4, 
                        price: 0,
                        status: 'upcoming', 
                        tokensSold: 0, 
                        triggerActivated: false 
                    },
                    { 
                        round: 5, 
                        price: 0,
                        status: 'upcoming', 
                        tokensSold: 0, 
                        triggerActivated: false 
                    },
                    { 
                        round: 6, 
                        price: 0,
                        status: 'upcoming', 
                        tokensSold: 0, 
                        triggerActivated: false 
                    }
                ];
                
                // Create price curve chart for Round 3
                console.log('Initializing price curve chart');
                // Chart initialization moved to separate script
                
                // Function to update the timeline with real-time data
                function updateAuctionTimeline() {
                    auctionRoundData.forEach(roundData => {
                        const roundStep = document.querySelector(`.timeline-step[data-round="${roundData.round}"]`);
                        if (roundStep) {
                            const tokensSoldElement = roundStep.querySelector('.timeline-tokens-sold');
                            if (tokensSoldElement) {
                                tokensSoldElement.textContent = `${roundData.tokensSold.toLocaleString()}`;
                            }
                            
                            // Update trigger status
                            const triggerElement = roundStep.querySelector('.timeline-trigger');
                            if (triggerElement) {
                                if (roundData.status === 'upcoming') {
                                    triggerElement.textContent = 'Pending';
                                    triggerElement.className = 'timeline-trigger';
                                } else {
                                    if (roundData.triggerActivated) {
                                        triggerElement.textContent = 'Triggered';
                                        triggerElement.className = 'timeline-trigger triggered';
                                    } else {
                                        triggerElement.textContent = 'Not Triggered';
                                        triggerElement.className = 'timeline-trigger not-triggered';
                                    }
                                }
                            }
                        }
                    });
                }
                
                // Initial update
                updateAuctionTimeline();
                
                // Simulate real-time updates for Round 3 (for demo purposes)
                setInterval(() => {
                    // Increment tokens sold in round 3 by a random amount
                    const round3Data = auctionRoundData.find(data => data.round === 3);
                    if (round3Data && round3Data.status === 'active') {
                        const randomIncrement = Math.floor(Math.random() * 500) + 100;
                        round3Data.tokensSold += randomIncrement;
                        
                        // Randomly trigger the mechanism with a small probability
                        if (Math.random() < 0.01 && !round3Data.triggerActivated) {
                            round3Data.triggerActivated = true;
                        }
                        
                        updateAuctionTimeline();
                    }
                }, 5000); // Update every 5 seconds
            });

            // Bid submission handlers
            document.getElementById('simple-bid-submit').addEventListener('click', function() {
                const amount = document.getElementById('simple-bid-amount').value;
                const maxPrice = document.getElementById('simple-max-price').value;
                
                // Add new transaction to history
                transactions.all.unshift({
                    price: parseFloat(maxPrice),
                    user: 'You',
                    time: 'Just now',
                    amount: Math.floor(amount / maxPrice)
                });
                transactions['my-bids'].unshift(transactions.all[0]);
                transactions.recent.unshift(transactions.all[0]);
                
                // Update current view
                const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
                updateTransactionList(activeFilter);
            });

            document.getElementById('advanced-bid-submit').addEventListener('click', function() {
                const tokenAmount = document.getElementById('advanced-token-amount').value;
                const minPrice = document.getElementById('min-price').value;
                const maxPrice = document.getElementById('max-price').value;
                
                transactions.all.unshift({
                    price: parseFloat(maxPrice),
                    user: 'You',
                    time: 'Just now',
                    amount: parseInt(tokenAmount)
                });
                transactions['my-bids'].unshift(transactions.all[0]);
                transactions.recent.unshift(transactions.all[0]);
                
                const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
                updateTransactionList(activeFilter);
            });

            document.getElementById('sell-tokens-submit').addEventListener('click', function() {
                const tokenAmount = document.getElementById('sell-token-amount').value;
                const minPrice = document.getElementById('sell-min-price').value;
                
                // Only proceed if values are valid
                if (parseInt(tokenAmount) > 0 && parseFloat(minPrice) > 0) {
                    // Add new transaction to history
                    transactions.all.unshift({
                        price: parseFloat(minPrice),
                        user: 'You',
                        time: 'Just now',
                        amount: parseInt(tokenAmount)
                    });
                    transactions['my-bids'].unshift(transactions.all[0]);
                    transactions.recent.unshift(transactions.all[0]);
                    
                    // Update current view
                    const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
                    updateTransactionList(activeFilter);
                    
                    // Show confirmation message
                    alert(`Sell order placed for ${tokenAmount} tokens at $${minPrice} per token.`);
                    
                    // Reset form
                    document.getElementById('sell-token-amount').value = '';
                    updateSellTokensPreview();
                } else {
                    alert('Please enter valid token amount and price.');
                }
            });

            // Initialize Chart.js graphs for each round
            function initializeRoundGraphs() {
                // Helper function to generate area chart data
                function generateAreaData(startPrice, endPrice, startIndex, endIndex) {
                    const data = [];
                    for (let i = 0; i < 30; i++) {
                        if (i >= startIndex && i <= endIndex) {
                            const progress = (i - startIndex) / (endIndex - startIndex);
                            const price = startPrice - (startPrice - endPrice) * progress;
                            data.push(price);
                        } else {
                            data.push(null);
                        }
                    }
                    return data;
                }
                
                // Round 3 data
                const round3Data = {
                    labels: Array.from({length: 30}, (_, i) => i * 10000),
                    datasets: [
                        // Normal allocation
                        {
                            label: 'Normal',
                            data: generateAreaData(2.50, 1.60, 0, 7),
                            backgroundColor: 'rgba(0, 123, 255, 0.5)',
                            borderWidth: 0,
                            fill: true,
                            pointRadius: 0
                        },
                        // Prior Round allocation
                        {
                            label: 'Prior Round',
                            data: generateAreaData(1.60, 1.45, 7, 9),
                            backgroundColor: 'rgba(255, 193, 7, 0.5)',
                            borderWidth: 0,
                            fill: true,
                            pointRadius: 0
                        },
                        // Future Round allocation
                        {
                            label: 'Future Round',
                            data: generateAreaData(1.45, 1.33, 9, 11),
                            backgroundColor: 'rgba(40, 167, 69, 0.5)',
                            borderWidth: 0,
                            fill: true,
                            pointRadius: 0
                        },
                        // Not Cleared allocation
                        {
                            label: 'Not Cleared',
                            data: generateAreaData(1.33, 0.65, 11, 30),
                            backgroundColor: 'rgba(220, 53, 69, 0.5)',
                            borderWidth: 0,
                            fill: true,
                            pointRadius: 0
                        },
                        // Demand Curve line
                        {
                            label: 'Demand Curve',
                            data: [2.50, 2.30, 2.10, 1.95, 1.80, 1.70, 1.60, 1.50, 1.45, 1.40, 1.35, 1.33, 1.30, 1.28, 1.25, 1.22, 1.20, 1.17, 1.15, 1.12, 1.10, 1.05, 1.00, 0.95, 0.90, 0.85, 0.80, 0.75, 0.70, 0.65],
                            borderColor: 'rgb(220, 53, 69)',
                            borderWidth: 3,
                            tension: 0.1,
                            fill: false
                        },
                        // Add key point markers for Round 1
                        {
                            label: 'Key Price Points',
                            data: [
                                { x: 110000, y: 1.33 },  // Current price at 110,000 tokens
                                { x: 220000, y: 1.00 },  // Reserve price at 220,000 tokens
                                { x: 90000, y: 1.45 }    // Trigger price at 90,000 tokens
                            ],
                            backgroundColor: [
                                'rgba(0, 123, 255, 0.8)',  // Current price (blue)
                                'rgba(40, 167, 69, 0.8)',  // Reserve price (green)
                                'rgba(220, 53, 69, 0.8)'   // Trigger price (red)
                            ],
                            borderColor: '#ffffff',
                            borderWidth: 2,
                            pointRadius: 10,
                            pointStyle: ['circle', 'triangle', 'rect'],
                            showLine: false,
                            pointHoverRadius: 12,
                            pointHoverBackgroundColor: [
                                'rgba(0, 123, 255, 1)',  // Current price (blue)
                                'rgba(40, 167, 69, 1)',  // Reserve price (green)
                                'rgba(220, 53, 69, 1)'   // Trigger price (red)
                            ],
                            pointHoverBorderColor: '#ffffff',
                            pointHoverBorderWidth: 3
                        }
                    ]
                };

                const chartOptions = {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Cumulative Demand (Tokens)'
                            },
                            type: 'linear',
                            position: 'bottom',
                            min: 0,
                            max: 290000
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Price ($)'
                            },
                            min: 0,
                            max: 3
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                },
                                filter: function(item) {
                                    // Hide the "Key Price Points" label from the legend
                                    return item.text !== 'Key Price Points';
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const datasetIndex = context.datasetIndex;
                                    const dataIndex = context.dataIndex;
                                    
                                    // Special handling for key price points
                                    if (context.dataset.label === 'Key Price Points') {
                                        if (dataIndex === 0) {
                                            return `Current Price: $${context.raw.y}`;
                                        } else if (dataIndex === 1) {
                                            return `Reserve Price: $${context.raw.y}`;
                                        } else if (dataIndex === 2) {
                                            return `Trigger Price: $${context.raw.y}`;
                                        }
                                    }
                                    
                                    return `${context.dataset.label}: $${context.raw}`;
                                }
                            }
                        },
                        annotation: {
                            annotations: {
                                reservePriceLine: {
                                    type: 'line',
                                    yMin: 1.50,
                                    yMax: 1.50,
                                    borderColor: 'rgba(40, 167, 69, 0.8)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: {
                                        enabled: true,
                                        content: 'Reserve Price: $1.50',
                                        position: 'end',
                                        backgroundColor: 'rgba(40, 167, 69, 0.8)',
                                        font: {
                                            weight: 'bold'
                                        }
                                    }
                                },
                                currentPriceLine: {
                                    type: 'line',
                                    yMin: 1.75,
                                    yMax: 1.75,
                                    borderColor: 'rgba(0, 123, 255, 0.8)',
                                    borderWidth: 2,
                                    borderDash: [2, 2],
                                    label: {
                                        enabled: true,
                                        content: 'Current Price: $1.75',
                                        position: 'end',
                                        backgroundColor: 'rgba(0, 123, 255, 0.8)',
                                        font: {
                                            weight: 'bold'
                                        }
                                    }
                                },
                                triggerPriceLine: {
                                    type: 'line',
                                    yMin: 1.85,
                                    yMax: 1.85,
                                    borderColor: 'rgba(220, 53, 69, 0.8)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: {
                                        enabled: true,
                                        content: 'Trigger Price: $1.85',
                                        position: 'end',
                                        backgroundColor: 'rgba(220, 53, 69, 0.8)',
                                        font: {
                                            weight: 'bold'
                                        }
                                    }
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Round 3 Cumulative Demand Curve',
                            font: {
                                size: 16,
                                weight: 'bold'
                            },
                            padding: {
                                top: 10,
                                bottom: 20
                            }
                        },
                        subtitle: {
                            display: true,
                            text: 'Token allocation with reserve, current, and trigger price thresholds',
                            font: {
                                size: 14,
                                style: 'italic'
                            },
                            padding: {
                                bottom: 10
                            }
                        }
                    }
                };

                // Initialize the chart
                const ctx = document.getElementById('roundChart').getContext('2d');
                roundChart = new Chart(ctx, {
                    type: 'line',
                    data: round3Data,
                    options: chartOptions
                });
                
                // Update chart when timeline steps are clicked
                const timelineSteps = document.querySelectorAll('.timeline-step');
                timelineSteps.forEach(step => {
                    step.addEventListener('click', () => {
                        const round = parseInt(step.getAttribute('data-round'));
                        let chartData;
                        
                        // Update chart title based on selected round
                        chartOptions.plugins.title.text = `Round ${round} Cumulative Demand Curve`;
                        
                        switch(round) {
                            case 1:
                                chartData = round1Data;
                                break;
                            case 3:
                                chartData = round3Data;
                                break;
                            default:
                                // Use a placeholder data for other rounds
                                chartData = {
                                    labels: Array.from({length: 30}, (_, i) => i * 10000),
                                    datasets: [
                                        // Normal allocation
                                        {
                                            label: 'Normal',
                                            data: generateAreaData(3.00, 2.00, 0, 6),
                                            backgroundColor: 'rgba(0, 123, 255, 0.5)',
                                            borderWidth: 0,
                                            fill: true,
                                            pointRadius: 0
                                        },
                                        // Prior Round allocation
                                        {
                                            label: 'Prior Round',
                                            data: generateAreaData(2.00, 1.85, 6, 8),
                                            backgroundColor: 'rgba(255, 193, 7, 0.5)',
                                            borderWidth: 0,
                                            fill: true,
                                            pointRadius: 0
                                        },
                                        // Future Round allocation
                                        {
                                            label: 'Future Round',
                                            data: generateAreaData(1.85, 1.75, 8, 10),
                                            backgroundColor: 'rgba(40, 167, 69, 0.5)',
                                            borderWidth: 0,
                                            fill: true,
                                            pointRadius: 0
                                        },
                                        // Not Cleared allocation
                                        {
                                            label: 'Not Cleared',
                                            data: generateAreaData(1.75, 0.75, 10, 30),
                                            backgroundColor: 'rgba(220, 53, 69, 0.5)',
                                            borderWidth: 0,
                                            fill: true,
                                            pointRadius: 0
                                        },
                                        // Demand Curve line
                                        {
                                            label: 'Demand Curve',
                                            data: [3.00, 2.80, 2.60, 2.40, 2.20, 2.00, 1.90, 1.85, 1.80, 1.75, 1.70, 1.65, 1.60, 1.55, 1.50, 1.45, 1.40, 1.35, 1.30, 1.25, 1.20, 1.15, 1.10, 1.05, 1.00, 0.95, 0.90, 0.85, 0.80, 0.75],
                                            borderColor: 'rgb(220, 53, 69)',
                                            borderWidth: 3,
                                            tension: 0.1,
                                            fill: false
                                        },
                                        // Add key point markers
                                        {
                                            label: `Round ${round} Key Points`,
                                            data: [
                                                { x: 90000, y: 1.75 },
                                                { x: 150000, y: 1.50 }
                                            ],
                                            backgroundColor: `rgb(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255})`,
                                            borderColor: '#ffffff',
                                            borderWidth: 2,
                                            pointRadius: 10,
                                            pointStyle: 'rectRot',
                                            showLine: false,
                                            pointHoverRadius: 12
                                        }
                                    ]
                                };
                        }
                        
                        roundChart.data = chartData;
                        roundChart.update();
                    });
                });
            }

            // Call the function to initialize graphs
            initializeRoundGraphs();
            
            // Simple bid calculations
            const simpleBidAmount = document.getElementById('simple-bid-amount');
            const simpleMaxPrice = document.getElementById('simple-max-price');
            const simpleEstimatedTokens = document.getElementById('simple-estimated-tokens');
            const simpleDiscount = document.getElementById('simple-discount');
            const simpleTotal = document.getElementById('simple-total');
            
            function updateSimpleBidCalculations() {
                if (!simpleBidAmount || !simpleMaxPrice || !simpleEstimatedTokens || !simpleDiscount || !simpleTotal) return;
                
                const bidAmount = parseFloat(simpleBidAmount.value) || 0;
                const maxPrice = parseFloat(simpleMaxPrice.value) || 0;
                
                if (bidAmount > 0 && maxPrice > 0) {
                    const estimatedTokens = Math.floor(bidAmount / maxPrice);
                    const discountAmount = bidAmount * 0.05; // 5% early bid discount
                    
                    simpleEstimatedTokens.textContent = estimatedTokens.toLocaleString();
                    simpleDiscount.textContent = formatCurrency(discountAmount);
                    simpleTotal.textContent = formatCurrency(bidAmount);
                } else {
                    simpleEstimatedTokens.textContent = '0';
                    simpleDiscount.textContent = '$0';
                    simpleTotal.textContent = '$0';
                }
            }
            
            if (simpleBidAmount && simpleMaxPrice) {
                simpleBidAmount.addEventListener('input', updateSimpleBidCalculations);
                simpleMaxPrice.addEventListener('input', updateSimpleBidCalculations);
                
                // Initialize calculations
                updateSimpleBidCalculations();
            }
            
            // Advanced bid calculations
            const advancedTokenAmount = document.getElementById('advanced-token-amount');
            const minPrice = document.getElementById('min-price');
            const maxPrice = document.getElementById('max-price');
            const advTotalAmount = document.getElementById('adv-total-amount');
            const advDiscount = document.getElementById('adv-discount');
            const advProbability = document.getElementById('adv-probability');
            const advFinalAmount = document.getElementById('adv-final-amount');
            
            function updateAdvancedBidCalculations() {
                if (!advancedTokenAmount || !maxPrice || !advTotalAmount || !advDiscount || !advProbability || !advFinalAmount) return;
                
                const tokenAmount = parseInt(advancedTokenAmount.value) || 0;
                const maxPriceValue = parseFloat(maxPrice.value) || 0;
                
                if (tokenAmount > 0 && maxPriceValue > 0) {
                    const totalAmount = maxPriceValue * tokenAmount;
                    const discountAmount = totalAmount * 0.05; // 5% early bid discount
                    const finalAmount = totalAmount - discountAmount;
                    
                    // Calculate probability based on price (simple algorithm for demo)
                    let probability = "High";
                    if (maxPriceValue >= 1.55) {
                        probability = "Very High (95%)";
                    } else if (maxPriceValue >= 1.45) {
                        probability = "High (80%)";
                    } else if (maxPriceValue >= 1.35) {
                        probability = "Medium (60%)";
                    } else {
                        probability = "Low (30%)";
                    }
                    
                    advTotalAmount.textContent = formatCurrency(totalAmount);
                    advDiscount.textContent = formatCurrency(discountAmount);
                    advProbability.textContent = probability;
                    advFinalAmount.textContent = formatCurrency(finalAmount);
                } else {
                    advTotalAmount.textContent = '$0';
                    advDiscount.textContent = '$0';
                    advProbability.textContent = 'N/A';
                    advFinalAmount.textContent = '$0';
                }
            }
            
            if (advancedTokenAmount && minPrice && maxPrice) {
                advancedTokenAmount.addEventListener('input', updateAdvancedBidCalculations);
                minPrice.addEventListener('input', updateAdvancedBidCalculations);
                maxPrice.addEventListener('input', updateAdvancedBidCalculations);
                
                // Initialize calculations
                updateAdvancedBidCalculations();
            }
            
            // Sell tokens preview calculations
            const sellTokenAmount = document.getElementById('sell-token-amount');
            const sellMinPrice = document.getElementById('sell-min-price');
            const sellTokensPreview = document.getElementById('sell-tokens-preview');
            const sellPricePreview = document.getElementById('sell-price-preview');
            const sellAvgCost = document.getElementById('sell-avg-cost');
            const sellPnlPerToken = document.getElementById('sell-pnl-per-token');
            const sellTotalAmount = document.getElementById('sell-total-amount');
            const sellTotalPnl = document.getElementById('sell-total-pnl');
            
            function updateSellTokensPreview() {
                if (!sellTokenAmount || !sellMinPrice || !sellTokensPreview || !sellPricePreview || 
                    !sellAvgCost || !sellPnlPerToken || !sellTotalAmount || !sellTotalPnl) return;
                
                const tokenAmount = parseInt(sellTokenAmount.value) || 0;
                const minPrice = parseFloat(sellMinPrice.value) || 0;
                const avgCost = 1.41; // From portfolio data
                
                if (tokenAmount > 0 && minPrice > 0) {
                    // Calculate P&L per token
                    const pnlPerToken = minPrice - avgCost;
                    const totalAmount = minPrice * tokenAmount;
                    const totalPnl = pnlPerToken * tokenAmount;
                    
                    // Update preview elements
                    sellTokensPreview.textContent = tokenAmount.toLocaleString();
                    sellPricePreview.textContent = `$${minPrice.toFixed(2)}`;
                    sellAvgCost.textContent = `$${avgCost.toFixed(2)}`;
                    
                    // Set P&L color based on profit or loss
                    if (pnlPerToken >= 0) {
                        sellPnlPerToken.textContent = `+$${pnlPerToken.toFixed(2)}`;
                        sellPnlPerToken.style.color = '#28a745'; // Green for profit
                        sellTotalPnl.textContent = `+$${totalPnl.toFixed(2)}`;
                        sellTotalPnl.style.color = '#28a745';
                    } else {
                        sellPnlPerToken.textContent = `-$${Math.abs(pnlPerToken).toFixed(2)}`;
                        sellPnlPerToken.style.color = '#dc3545'; // Red for loss
                        sellTotalPnl.textContent = `-$${Math.abs(totalPnl).toFixed(2)}`;
                        sellTotalPnl.style.color = '#dc3545';
                    }
                    
                    sellTotalAmount.textContent = `$${totalAmount.toFixed(2)}`;
                } else {
                    // Reset preview if inputs are invalid
                    sellTokensPreview.textContent = '0';
                    sellPricePreview.textContent = minPrice > 0 ? `$${minPrice.toFixed(2)}` : '$0.00';
                    sellAvgCost.textContent = `$${avgCost.toFixed(2)}`;
                    sellPnlPerToken.textContent = '$0.00';
                    sellPnlPerToken.style.color = 'inherit';
                    sellTotalAmount.textContent = '$0.00';
                    sellTotalPnl.textContent = '$0.00';
                    sellTotalPnl.style.color = 'inherit';
                }
            }
            
            // Add event listeners for sell tokens inputs
            if (sellTokenAmount && sellMinPrice) {
                sellTokenAmount.addEventListener('input', updateSellTokensPreview);
                sellMinPrice.addEventListener('input', updateSellTokensPreview);
                
                // Initialize sell tokens preview
                updateSellTokensPreview();
            }
            
            // Auction rules toggle
            const complianceTitle = document.querySelector('.compliance-title');
            const complianceContent = document.querySelector('.compliance-content');
            
            if (complianceTitle && complianceContent) {
                complianceTitle.addEventListener('click', function() {
                    const isVisible = complianceContent.style.display !== 'none';
                    complianceContent.style.display = isVisible ? 'none' : 'block';
                    complianceTitle.querySelector('span:last-child').textContent = isVisible ? '+' : '-';
                });
            }
            
            // Account tabs functionality
            const accountTabs = document.querySelectorAll('.account-tab');
            const accountTabContents = document.querySelectorAll('.account-tab-content');
            
            if (accountTabs.length > 0) {
                accountTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Remove active class from all tabs and contents
                        accountTabs.forEach(t => t.classList.remove('active'));
                        accountTabContents.forEach(content => content.classList.remove('active'));
                        
                        // Add active class to clicked tab
                        tab.classList.add('active');
                        
                        // Show corresponding content
                        const tabId = tab.getAttribute('data-tab');
                        const activeContent = document.getElementById(`${tabId}-content`);
                        if (activeContent) {
                            activeContent.classList.add('active');
                        }
                    });
                });
            }
        });
    </script>
    
    <!-- Chart initialization script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts
            let priceCurveChart, bidHeatmapChart, roundChart;
            
            // Function to initialize all charts
            function initializeCharts() {
                initializePriceCurveChart();
                initializeBidHeatmapChart();
                initializeRoundGraphs();
            }
            
            // Initialize price curve chart
            function initializePriceCurveChart() {
                const priceCurveCanvas = document.getElementById('priceCurveChart');
                if (priceCurveCanvas) {
                    const ctx = priceCurveCanvas.getContext('2d');
                    
                    // Get current date and calculate auction times
                    const now = new Date();
                    const auctionStart = new Date(now);
                    auctionStart.setHours(now.getHours() - 6); // Assuming we're halfway through a 12-hour auction
                    
                    // Generate time labels for the x-axis (actual times)
                    const timeLabels = [];
                    for (let i = 0; i <= 12; i += 2) {
                        const labelTime = new Date(auctionStart);
                        labelTime.setHours(auctionStart.getHours() + i);
                        timeLabels.push(labelTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}));
                    }
                    
                    priceCurveChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: timeLabels,
                            datasets: [
                                {
                                    label: 'Auction Price Curve',
                                    data: [1.50, 1.58, 1.65, 1.75, 1.85, 1.92, 2.00], // Reversed to slope from low to high
                                    borderColor: '#f6d131',
                                    backgroundColor: 'rgba(246, 209, 49, 0.1)',
                                    fill: true,
                                    tension: 0.4,
                                    pointRadius: 4,
                                    pointBackgroundColor: '#f6d131'
                                },
                                {
                                    label: 'Reserve Price',
                                    data: [1.50, 1.50, 1.50, 1.50, 1.50, 1.50, 1.50],
                                    borderColor: 'rgba(40, 167, 69, 0.8)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    fill: false,
                                    pointRadius: 0
                                },
                                {
                                    label: 'Current Price',
                                    data: [1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75],
                                    borderColor: 'rgba(0, 123, 255, 0.8)',
                                    borderWidth: 2,
                                    borderDash: [2, 2],
                                    fill: false,
                                    pointRadius: 0
                                },
                                {
                                    label: 'Trigger Price',
                                    data: [1.85, 1.85, 1.85, 1.85, 1.85, 1.85, 1.85],
                                    borderColor: 'rgba(220, 53, 69, 0.8)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    fill: false,
                                    pointRadius: 0
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: true,
                                    position: 'top',
                                    labels: {
                                        usePointStyle: true,
                                        padding: 20,
                                        font: {
                                            size: 12
                                        }
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return `Price: $${context.raw}`;
                                        }
                                    }
                                },
                                title: {
                                    display: true,
                                    text: 'Round 3 Auction Price Dynamics',
                                    font: {
                                        size: 16,
                                        weight: 'bold'
                                    },
                                    padding: {
                                        top: 10,
                                        bottom: 10
                                    }
                                },
                                subtitle: {
                                    display: true,
                                    text: 'Price changes over auction duration with key price thresholds',
                                    font: {
                                        size: 12,
                                        style: 'italic'
                                    },
                                    padding: {
                                        bottom: 10
                                    }
                                },
                                annotation: {
                                    annotations: {
                                        reservePriceLine: {
                                            type: 'line',
                                            xMin: 0,
                                            xMax: 0,
                                            borderColor: 'rgba(40, 167, 69, 0.8)',
                                            borderWidth: 2,
                                            borderDash: [5, 5],
                                            label: {
                                                enabled: true,
                                                content: 'Reserve Price: $1.50',
                                                position: 'top',
                                                backgroundColor: 'rgba(40, 167, 69, 0.8)',
                                                font: {
                                                    weight: 'bold'
                                                }
                                            }
                                        },
                                        currentPriceLine: {
                                            type: 'line',
                                            xMin: 4,
                                            xMax: 4,
                                            borderColor: 'rgba(0, 123, 255, 0.8)',
                                            borderWidth: 2,
                                            borderDash: [2, 2],
                                            label: {
                                                enabled: true,
                                                content: 'Current Price: $1.75',
                                                position: 'top',
                                                backgroundColor: 'rgba(0, 123, 255, 0.8)'
                                            }
                                        },
                                        triggerPriceLine: {
                                            type: 'line',
                                            xMin: 6,
                                            xMax: 6,
                                            borderColor: 'rgba(220, 53, 69, 0.8)',
                                            borderWidth: 2,
                                            borderDash: [5, 5],
                                            label: {
                                                enabled: true,
                                                content: 'Trigger Price: $1.85',
                                                position: 'top',
                                                backgroundColor: 'rgba(220, 53, 69, 0.8)'
                                            }
                                        }
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: false,
                                    min: 1.45,
                                    max: 2.05,
                                    title: {
                                        display: true,
                                        text: 'Token Price ($)',
                                        font: {
                                            weight: 'bold'
                                        }
                                    },
                                    ticks: {
                                        callback: function(value) {
                                            return '$' + value.toFixed(2);
                                        }
                                    }
                                },
                                x: {
                                    title: {
                                        display: true,
                                        text: 'Auction Time',
                                        font: {
                                            weight: 'bold'
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
            }
            
            // Initialize bid volume heatmap
            function initializeBidHeatmapChart() {
                const bidHeatmapCanvas = document.getElementById('bidHeatmapChart');
                if (bidHeatmapCanvas) {
                    const ctx = bidHeatmapCanvas.getContext('2d');
                    bidHeatmapChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['$1.50-1.55', '$1.56-1.60', '$1.61-1.65', '$1.66-1.70', '$1.71-1.75', '$1.76-1.80', '$1.81-1.85', '$1.86-1.90', '$1.91-2.00'],
                            datasets: [
                                {
                                    label: 'Low Volume (< 15k tokens)',
                                    data: [8000, 15000, 0, 0, 0, 0, 0, 12000, 6000],
                                    backgroundColor: 'rgba(246, 209, 49, 0.2)',
                                    borderColor: 'rgba(246, 209, 49, 1)',
                                    borderWidth: 1
                                },
                                {
                                    label: 'Medium Volume (15k-30k tokens)',
                                    data: [0, 0, 22000, 0, 0, 0, 20000, 0, 0],
                                    backgroundColor: 'rgba(246, 209, 49, 0.5)',
                                    borderColor: 'rgba(246, 209, 49, 1)',
                                    borderWidth: 1
                                },
                                {
                                    label: 'High Volume (> 30k tokens)',
                                    data: [0, 0, 0, 38000, 45000, 32000, 0, 0, 0],
                                    backgroundColor: 'rgba(246, 209, 49, 0.8)',
                                    borderColor: 'rgba(246, 209, 49, 1)',
                                    borderWidth: 1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: true,
                                    position: 'top',
                                    labels: {
                                        usePointStyle: true,
                                        padding: 20,
                                        font: {
                                            size: 12
                                        }
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return `Volume: ${context.raw.toLocaleString()} tokens`;
                                        }
                                    }
                                },
                                title: {
                                    display: true,
                                    text: 'Bid Distribution by Price Range',
                                    font: {
                                        size: 14,
                                        weight: 'bold'
                                    },
                                    padding: {
                                        top: 10,
                                        bottom: 10
                                    }
                                },
                                annotation: {
                                    annotations: {
                                        reservePriceLine: {
                                            type: 'line',
                                            xMin: 0,
                                            xMax: 0,
                                            borderColor: 'rgba(40, 167, 69, 0.8)',
                                            borderWidth: 2,
                                            borderDash: [5, 5],
                                            label: {
                                                enabled: true,
                                                content: 'Reserve Price: $1.50',
                                                position: 'top',
                                                backgroundColor: 'rgba(40, 167, 69, 0.8)',
                                                font: {
                                                    weight: 'bold'
                                                }
                                            }
                                        },
                                        currentPriceLine: {
                                            type: 'line',
                                            xMin: 4,
                                            xMax: 4,
                                            borderColor: 'rgba(0, 123, 255, 0.8)',
                                            borderWidth: 2,
                                            borderDash: [2, 2],
                                            label: {
                                                enabled: true,
                                                content: 'Current Price: $1.75',
                                                position: 'top',
                                                backgroundColor: 'rgba(0, 123, 255, 0.8)'
                                            }
                                        },
                                        triggerPriceLine: {
                                            type: 'line',
                                            xMin: 6,
                                            xMax: 6,
                                            borderColor: 'rgba(220, 53, 69, 0.8)',
                                            borderWidth: 2,
                                            borderDash: [5, 5],
                                            label: {
                                                enabled: true,
                                                content: 'Trigger Price: $1.85',
                                                position: 'top',
                                                backgroundColor: 'rgba(220, 53, 69, 0.8)'
                                            }
                                        }
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    stacked: true
                                },
                                y: {
                                    stacked: true,
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'Volume (tokens)'
                                    }
                                }
                            }
                        }
                    });
                }
            }
            
            // Initialize all charts when page loads
            initializeCharts();
            
            // Add event listeners to visual tabs to update charts when tabs are clicked
            const visualTabs = document.querySelectorAll('.bid-tab[data-visual-tab]');
            visualTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Force chart resize after tab switch to ensure proper rendering
                    setTimeout(() => {
                        if (priceCurveChart && tab.getAttribute('data-visual-tab') === 'price-curve') {
                            priceCurveChart.resize();
                        }
                        if (bidHeatmapChart && tab.getAttribute('data-visual-tab') === 'bid-distribution') {
                            bidHeatmapChart.resize();
                        }
                        if (roundChart && tab.getAttribute('data-visual-tab') === 'cumulative-demand') {
                            roundChart.resize();
                        }
                    }, 50);
                });
            });
        });
    </script>
    
    <!-- Function to format currency in shorthand (k for thousands, m for millions) -->
    <script>
        function formatCurrency(value) {
            if (!value) return '$0';
            
            const num = parseFloat(value.toString().replace(/[^0-9.-]+/g, ''));
            
            if (num >= 1000000) {
                return '$' + (num / 1000000).toFixed(1) + 'm';
            } else if (num >= 1000) {
                return '$' + (num / 1000).toFixed(1) + 'k';
            } else {
                return '$' + num.toFixed(2);
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // Format all total values on page load
            const totalValues = document.querySelectorAll('.bid-user, .total-value');
            totalValues.forEach(el => {
                if (el.textContent.includes('$')) {
                    const originalValue = el.textContent;
                    el.setAttribute('data-original', originalValue);
                    el.textContent = formatCurrency(originalValue);
                }
            });
            
            // Update any dynamically calculated values
            const originalUpdateSimpleBidCalculations = window.updateSimpleBidCalculations;
            if (typeof originalUpdateSimpleBidCalculations === 'function') {
                window.updateSimpleBidCalculations = function() {
                    originalUpdateSimpleBidCalculations();
                    
                    const simpleDiscount = document.getElementById('simple-discount');
                    const simpleTotal = document.getElementById('simple-total');
                    
                    if (simpleDiscount && simpleDiscount.textContent.includes('$')) {
                        simpleDiscount.textContent = formatCurrency(simpleDiscount.textContent);
                    }
                    
                    if (simpleTotal && simpleTotal.textContent.includes('$')) {
                        simpleTotal.textContent = formatCurrency(simpleTotal.textContent);
                    }
                };
            }
            
            const originalUpdateAdvancedBidCalculations = window.updateAdvancedBidCalculations;
            if (typeof originalUpdateAdvancedBidCalculations === 'function') {
                window.updateAdvancedBidCalculations = function() {
                    originalUpdateAdvancedBidCalculations();
                    
                    const advTotalAmount = document.getElementById('adv-total-amount');
                    const advDiscount = document.getElementById('adv-discount');
                    const advFinalAmount = document.getElementById('adv-final-amount');
                    
                    if (advTotalAmount && advTotalAmount.textContent.includes('$')) {
                        advTotalAmount.textContent = formatCurrency(advTotalAmount.textContent);
                    }
                    
                    if (advDiscount && advDiscount.textContent.includes('$')) {
                        advDiscount.textContent = formatCurrency(advDiscount.textContent);
                    }
                    
                    if (advFinalAmount && advFinalAmount.textContent.includes('$')) {
                        advFinalAmount.textContent = formatCurrency(advFinalAmount.textContent);
                    }
                };
            }
        });
    </script>
</body>
</html> 